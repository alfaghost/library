<h3>Edit <%= @book.name %></h3>

<div class="row">
  <div class="col-sm-10 col-sm-offset-1 col-md-4 col-md-offset-4">
    <%= form_for(@book) do |f| %>
        <div class="form-group">
          <%= f.label :name, class: 'control-label' %><br />
          <%= f.text_field :name, class: 'form-control', autofocus: true %>
        </div>

        <div class="form-group">
          <%= f.label :description, class: 'control-label' %><br />
          <%= f.text_field :description, class: 'form-control' %>
        </div>

        <div class="form-group">
          <%= f.label :image, class: 'control-label' %><br />
          <%= f.file_field :image, class: 'form-control' %>
        </div>

        <div class="form-group">
          <%= f.label 'Current authors:', class: 'control-label' %><br />
          <ul>
            <%= render partial: 'shared/authors', collection: @current_authors %>
          </ul>
          <%= f.label 'Current categories:', class: 'control-label' %><br />
          <ul>
            <%= render partial: 'shared/authors', collection: @current_categories %>
          </ul>
        </div>

        <%= f.fields_for :authorships do |ff| %>
            <%= f.select :authors, @authors.collect { |p| [ p.name, p.id ] }, {},
                         { :multiple => true, :size => 5, class: "form-control" } %>
        <% end %>

        <%= f.fields_for :categorizations do |ff| %>
            <%= f.select :categories, @categories.collect { |p| [ p.name, p.id ] }, {},
                         { :multiple => true, :size => 5, class: "form-control" } %>
        <% end %>

        <%= f.submit "Save changes", class: "btn btn-primary" %>
    <% end %>
  </div>
</div>